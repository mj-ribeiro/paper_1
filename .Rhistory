col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
dotchart(covid$casos,
labels = covid$UF,
cex = 1.5,
col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
covid = covid[order(covid$casos), ]
dotchart(covid$casos,
labels = covid$UF,
cex = 1.5,
col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
pct = 100*covid$casos/sum(covid$casos)
pct
pct = round(pct, 2)
pct
pie(pct,
labels = UF,
radius = 1,
main = 'Percentual de covid em cada Estado'
)
covid = covid[order(covid$casos), ]
dotchart(covid$casos,
labels = covid$UF,
cex = 1.5,
col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
pct = 100*covid$casos/sum(covid$casos)
pct
pct
pie(pct,
labels = covid$UF,
radius = 1,
main = 'percentual de covid por Estado'
)
pie(pct,
labels =  paste(covid$UF,sep= " ", pct, "%" ),
radius = 1,
main = 'percentual de covid por Estado'
)
pct
pct = round(pct, 2)
pie(pct,
labels =  paste(covid$UF,sep= " ", pct, "%" ),
radius = 1,
main = 'percentual de covid por Estado'
)
library(readxl)
#install.packages('readxl')
covid = read_excel(file.choose())
head(covid)
covid = covid[order(covid$casos), ]
dotchart(covid$casos,
labels = covid$UF,
cex = 1.5,
col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
covid = covid[order(covid$casos), ]
dotchart(covid$casos,
labels = covid$UF,
cex = 1.5,
col = 'steelblue4',
pch = 16,
xlab = 'Casos de covid')
pct = 100*covid$casos/sum(covid$casos)
pct
pct = round(pct, 2)
pct
pie(pct,
labels = covid$UF,
radius = 1,
main = 'Percentual de covid em cada Estado')
paste(10, sep="", '%')
paste(10, sep=" ", '%')
pie(pct,
labels = paste(covid$UF, sep = '', pct, '%')
radius = 1,
main = 'Percentual de covid em cada Estado')
pie(pct,
labels = paste(covid$UF, sep ="", pct, '%')
radius = 1,
main = 'Percentual de covid em cada Estado')
pie(pct,
labels = paste(covid$UF, sep ="", pct, '%'),
radius = 1,
main = 'Percentual de covid em cada Estado')
pie(pct,
labels = paste(covid$UF, sep =" ", pct, '%'),
radius = 1,
main = 'Percentual de covid em cada Estado')
pct = 100*covid$casos/sum(covid$casos)
pct = round(pct, 2)
pie(pct,
labels = covid$UF,
radius = 1,
main = 'Percentual de covid em cada Estado')
paste(10, "%", sep="")
paste(10, "%", sep=" ")
paste(pct, "%", sep=" ")
pie(pct,
labels = paste(covid$UF, pct, '%', sep=" "),
radius = 1,
main = 'Percentual de covid em cada Estado')
boxplot(covid$casos,
col='lightgreen',
main = 'Casos de Covid')
boxplot(covid$casos,
col = 'lightgreen',
main = 'Casos de Covid no Brasil')
c(1, 3, 1, 0, 5, 2, 2000 )
choco = c(1, 3, 1, 0, 5, 2, 2000 )
boxplot(choco)
mean(choco)
choco = c(1, 3, 1, 0, 5, 2 )
mean(choco)
install.packages('micEcon')
ls("package:micEcon")
ls(package:micEcon)
library(micEcon)
ls(package:micEcon)
library(readxl)
library(tidyverse)
library(dplyr)
library(fGarch)
library(magrittr)
library(haven)
pnad15 <- read_dta("D:/PNADs/PNAD_DATAZOOM/pnad2015pes.dta")
pnad15$v9906
pnad15$v9906 == 3331
sum((pnad15$v9906 == 3331 )*1)
sum((pnad15$v9906 == 3331, na.rm=T )*1)
sum((pnad15$v9906 == 3331, na.rm=T)*1)
sum(pnad15$v9906 == 3331)
pnad15$v9906 == 3331
pnad15[(pnad15$v9906 == 3331), 'v9906']
pnad15[pnad15$v9906 == 3331, 'v9906']
pnad15[pnad15$v9906 == 3331, v9906]
pnad15 %>%
dplyr::filter(v9906 == 3331)
pnad15 %>%
dplyr::filter(v9906 == 3331) %>%
select(v9906)
pnad15 %>%
dplyr::filter(v9906 == 3333) %>%
select(v9906)
pnad15 %>%
dplyr::filter(v9906 == 3331) %>%
select(v9906)
pnad15 %>%
dplyr::filter(v9906 == 2312) %>%
select(v9906)
v =  c(2301, 2345, 3309, 1122, 1311, 3343)
substr(v, 1, 2)
substr(v, 1, 2) == 33 | 23
substr(v, 1, 2) == 33&23
substr(v, 1, 2) %in% c(23, 33)
new = c()
new = ifelse(
substr(v, 1, 2) %in% c(23, 33),
1,
0
)
new
v
new
1.4*2.75
1.4*6
(1+0.1)^(1/12)
(1+0.12)^(1/12)
(1+0.12)^(1/12)-1
(1 + 0.1054)
(1 + 0.1054)^(1/12)
(1 + 0.1054)^(1/12)-1
tx = (1 + 0.1054)^(1/12)-1
1035*(1+ tx)^30
1035*(1+ tx)^29
r = 1035*(1+ tx)^29
i=1035
r = i*(1+ tx)^29
r-i
(r-i)*0.15
rl = (r-i)*0.15
n = 29
tx_l = (rl/i)^(1/n) - 1
ir = (r-i)*0.15
r_l = r - ir
tx_l = (r_l/i)^(1/n) - 1
(1 + tx_l)^(12)-1
100*((1 + tx_l)^(12)-1)
14871.72 + 28752.62 + 12685.63
14871.72 + 28752.62 + 12685.63 + 23290.89 + 7722.53
while (T) {
print('Olá chichia')
}
c = 0
while (T) {
c = c + 1
cat('Olá chichia', 'repetição', c)
}
c = 0
while (T) {
c = c + 1
cat('Olá chichia', \n 'repetição', c)
}
c = 0
while (T) {
c = c + 1
cat('Olá chichia', '\n repetição', c)
}
c = 0
while (T) {
c = c + 1
cat('Olá chichia \n', 'repetição', c)
}
setwd("C:/Users/user/Downloads/Thesis_paper_1/calibration")
# libraries ----
library(readxl)
library(tidyverse)
library(dplyr)
library(fGarch)
library(magrittr)
library(haven)
library(xlsx)
library(data.table)
d = function(x){                   # usar o in ao invés do ==
k = ifelse(x==1, 1,
ifelse(x %in% c(2, 3,4), 2,
ifelse(x %in% seq(5, 12, 1), 3, 0)
))
return(k)
}
xx = seq(2001, 2015, 1)
sy = 2010
xx[!xx%in%sy]
for(i in xx){
print(i)
}
info = function(year, t_est){
t_est = enquo(t_est)                    # Create quosure
inpc = read_excel("inpc.xlsx")
inpc = data.frame(inpc)
s_min = read_excel("salário_min.xlsx")
s_min = data.frame(s_min)
defla = inpc[inpc$ano==year, 'd10']
w_min = s_min[s_min$ano==year, 'salário']*defla
hr_trab = (252*8)/12       # 252 days  8 hours worked  12 months  hour worked per month
# rule 25%  - get s_hora > r25
r25 = (0.25*w_min)/hr_trab
pnad <- read_dta(paste('D:/PNADs/PNAD_DATAZOOM/pnad', year,'pes.dta', sep=''))
pnad = pnad %>% add_column(new = 1)
pnad =  pnad %>% dplyr::mutate(s_hora = (v4718*defla)/hr_trab)
pnad = pnad %>% dplyr::mutate(my_code = d(v4816))
pnad %>% count(is.na(my_code)==T & is.na(s_hora)==T )
pnad = pnad %>%
dplyr::filter(v4817 != 9 &                          # remove military
v4816 != 8 &                        # remove public administration
my_code !=0 &                       # remove NAs
s_hora > r25 &                      # rule 25%
v4718 < 999999995904)
anos_est =pnad %>%
group_by(my_code) %>%
dplyr::summarise(weighted.mean(!!t_est,
w = v4729,
na.rm = TRUE) )
W_i = pnad %>%
group_by(my_code) %>%
summarise(weighted.mean(s_hora,
w = v4729,
na.rm=T))
soma = pnad %>%
group_by(my_code) %>%
count(new, wt = v4729) %>%
summarise(n)
p_i = soma %>%
summarise(p_i = n/sum(soma$n))
anos_est[1] = NULL
W_i[1] = NULL
colnames(anos_est) = c('anos_est')
colnames(W_i) = c('W_i')
colnames(p_i) = c('p_i')
data.frame(anos_est, W_i, p_i)
eta = 0.103
beta = 0.231
c = (1-eta)/beta
s = 0.24*(anos_est/25)
phi = c*s/(1-s)
colnames(phi) = 'phi'
sec = 3
pibs = read_excel('pibs_set.xls', sheet = 's1')
pibs = data.frame(pibs)
alfa = pibs[pibs$Data==year, 1:sec+1]/pibs[pibs$Data==year, sec+2 ]
alfa = transpose(alfa)
colnames(alfa) = 'alfa'
ocp = c('AGR', 'IND', 'SEV')
df = data.frame(W_i, p_i, anos_est, phi, alfa)
row.names(df) = ocp
if(year){
write.xlsx(df, file=paste('data_',substr(year,ifelse((year>=2000 & year<=2009),4,3),4), '.xlsx', sep=''))
}else{
}
}
for(i in xx){
info(i, ifelse(i<=2006, v4703, v4803 ))
}
c = 0
for(i in xx){
c = c + 1
cat('Ano:', i, '\n Progresso:', c/length(xx))
info(i, ifelse(i<=2006, v4703, v4803 ))
}
print(2*'--')
print('--')
cat('--')
cat(3*'--')
rep(strrep("*",5),4)
strrep("*",5)
cat(strrep("*",5) )
cat(strrep("*",20) )
c = 0
for(i in xx){
cat(strrep("*",20) )
c = c + 1
info(i, ifelse(i<=2006, v4703, v4803 ))
cat('Ano:', i, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
sy = 2010
xx = seq(2002, 2015, 1)
xx = xx[!xx%in%sy]  # remove o 2010
c = 0
for(i in xx){
cat(strrep("*",20) )
c = c + 1
info(i, ifelse(i<=2006, v4703, v4803 ))
cat('Ano:', i, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
info(2002, v4703)
c = 0
for(k in xx){
cat(strrep("*",20) )
c = c + 1
info(k, ifelse(k<=2006, v4703, v4803 ))
cat('Ano:', k, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
info = function(year, t_est){
cat('year=', year)
t_est = enquo(t_est)                    # Create quosure
inpc = read_excel("inpc.xlsx")
inpc = data.frame(inpc)
s_min = read_excel("salário_min.xlsx")
s_min = data.frame(s_min)
defla = inpc[inpc$ano==year, 'd10']
w_min = s_min[s_min$ano==year, 'salário']*defla
hr_trab = (252*8)/12       # 252 days  8 hours worked  12 months  hour worked per month
# rule 25%  - get s_hora > r25
r25 = (0.25*w_min)/hr_trab
pnad <- read_dta(paste('D:/PNADs/PNAD_DATAZOOM/pnad', year,'pes.dta', sep=''))
pnad = pnad %>% add_column(new = 1)
pnad =  pnad %>% dplyr::mutate(s_hora = (v4718*defla)/hr_trab)
pnad = pnad %>% dplyr::mutate(my_code = d(v4816))
pnad %>% count(is.na(my_code)==T & is.na(s_hora)==T )
pnad = pnad %>%
dplyr::filter(v4817 != 9 &                          # remove military
v4816 != 8 &                        # remove public administration
my_code !=0 &                       # remove NAs
s_hora > r25 &                      # rule 25%
v4718 < 999999995904)
anos_est =pnad %>%
group_by(my_code) %>%
dplyr::summarise(weighted.mean(!!t_est,
w = v4729,
na.rm = TRUE) )
W_i = pnad %>%
group_by(my_code) %>%
summarise(weighted.mean(s_hora,
w = v4729,
na.rm=T))
soma = pnad %>%
group_by(my_code) %>%
count(new, wt = v4729) %>%
summarise(n)
p_i = soma %>%
summarise(p_i = n/sum(soma$n))
anos_est[1] = NULL
W_i[1] = NULL
colnames(anos_est) = c('anos_est')
colnames(W_i) = c('W_i')
colnames(p_i) = c('p_i')
data.frame(anos_est, W_i, p_i)
eta = 0.103
beta = 0.231
c = (1-eta)/beta
s = 0.24*(anos_est/25)
phi = c*s/(1-s)
colnames(phi) = 'phi'
sec = 3
pibs = read_excel('pibs_set.xls', sheet = 's1')
pibs = data.frame(pibs)
alfa = pibs[pibs$Data==year, 1:sec+1]/pibs[pibs$Data==year, sec+2 ]
alfa = transpose(alfa)
colnames(alfa) = 'alfa'
ocp = c('AGR', 'IND', 'SEV')
df = data.frame(W_i, p_i, anos_est, phi, alfa)
row.names(df) = ocp
if(year){
write.xlsx(df, file=paste('data_',substr(year,ifelse((year>=2000 & year<=2009),4,3),4), '.xlsx', sep=''))
}else{
}
}
c = 0
for(k in xx){
cat(strrep("*",20) )
c = c + 1
info(k, ifelse(k<=2006, v4703, v4803 ))
cat('Ano:', k, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
info = function(year, t_est){
cat('\n year=', year)
t_est = enquo(t_est)                    # Create quosure
inpc = read_excel("inpc.xlsx")
inpc = data.frame(inpc)
s_min = read_excel("salário_min.xlsx")
s_min = data.frame(s_min)
defla = inpc[inpc$ano==year, 'd10']
w_min = s_min[s_min$ano==year, 'salário']*defla
hr_trab = (252*8)/12       # 252 days  8 hours worked  12 months  hour worked per month
# rule 25%  - get s_hora > r25
r25 = (0.25*w_min)/hr_trab
pnad <- read_dta(paste('D:/PNADs/PNAD_DATAZOOM/pnad', year,'pes.dta', sep=''))
pnad = pnad %>% add_column(new = 1)
pnad =  pnad %>% dplyr::mutate(s_hora = (v4718*defla)/hr_trab)
pnad = pnad %>% dplyr::mutate(my_code = d(v4816))
pnad %>% count(is.na(my_code)==T & is.na(s_hora)==T )
pnad = pnad %>%
dplyr::filter(v4817 != 9 &                          # remove military
v4816 != 8 &                        # remove public administration
my_code !=0 &                       # remove NAs
s_hora > r25 &                      # rule 25%
v4718 < 999999995904)
anos_est =pnad %>%
group_by(my_code) %>%
dplyr::summarise(weighted.mean(!!t_est,
w = v4729,
na.rm = TRUE) )
W_i = pnad %>%
group_by(my_code) %>%
summarise(weighted.mean(s_hora,
w = v4729,
na.rm=T))
soma = pnad %>%
group_by(my_code) %>%
count(new, wt = v4729) %>%
summarise(n)
p_i = soma %>%
summarise(p_i = n/sum(soma$n))
anos_est[1] = NULL
W_i[1] = NULL
colnames(anos_est) = c('anos_est')
colnames(W_i) = c('W_i')
colnames(p_i) = c('p_i')
data.frame(anos_est, W_i, p_i)
eta = 0.103
beta = 0.231
c = (1-eta)/beta
s = 0.24*(anos_est/25)
phi = c*s/(1-s)
colnames(phi) = 'phi'
sec = 3
pibs = read_excel('pibs_set.xls', sheet = 's1')
pibs = data.frame(pibs)
alfa = pibs[pibs$Data==year, 1:sec+1]/pibs[pibs$Data==year, sec+2 ]
alfa = transpose(alfa)
colnames(alfa) = 'alfa'
ocp = c('AGR', 'IND', 'SEV')
df = data.frame(W_i, p_i, anos_est, phi, alfa)
row.names(df) = ocp
write.xlsx(df, file=paste('data_',substr(year,ifelse((year>=2000 & year<=2009),4,3),4), '.xlsx', sep=''))
print('Fim da Função')
}
c = 0
for(k in xx){
cat(strrep("*",20) )
c = c + 1
info(k, ifelse(k<=2006, v4703, v4803 ))
cat('Ano:', k, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
last_error()
rlang::last_error()
c = 0
for(k in xx){
cat(strrep("*",20) )
c = c + 1
info(k, if_else(k<=2006, v4703, v4803 ))
cat('Ano:', k, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
if_else(k<=2006, v4703, v4803 )
sy = 2010
xx = seq(2002, 2015, 1)
xx = xx[!xx%in%sy]  # remove o 2010
c = 0
for(k in xx){
cat(strrep("*",20) )
c = c + 1
if(k<=2006){info(k, v4703)}
else{info(k, v4803)}
cat('Ano:', k, '\n Progresso:', paste(round(100*c/length(xx),4), '%', sep='') )
}
